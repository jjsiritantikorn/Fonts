
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

import javax.swing.JButton;
import javax.swing.JColorChooser;
import javax.swing.JFrame;

public class foregroundbackground extends JButton {
  // colorProperty is ONE color, but can be indicated by fore or back color
  protected Color colorProperty;
  // bg=true means "choosed color is background color"
  // bg=false means "choosed color is foreground color"
  protected boolean bg;
  
  public foregroundbackground( String p_text, Color p_color, boolean p_bg ){
    setText( p_text );
    setBackground( p_color );
    setBg( p_bg );
    setColorByProperty();
    addActionListener(new ModalListener());
        
  }
  
  public void setColorByProperty(){
    if( isBg() ){
      setBackground( getContentPane() );
    } else {
      setForeground( getContentPane() );
    }
  }

  // for testing purposes only
  public static void main(String[] args) {
    foregroundbackground jbkbc = new foregroundbackground( "choose back", Color.BLACK, false );
    foregroundbackground jbkbc1 = new foregroundbackground( "choose fore", Color.BLUE, false );
    JFrame jf = new JFrame();
    jf.setLayout( new BorderLayout() );
    jf.getContentPane().add( jbkbc, BorderLayout.NORTH );
    jf.getContentPane().add( jbkbc1, BorderLayout.CENTER );
    jf.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    jf.setSize( 100, 200 );
    jf.setVisible(true);
  }
  /**
   * @return Returns the color.
   */
  public Color getContentPane() {
    return colorProperty;
  }
  
  public void setBackground(Color color) {
    this.colorProperty = color;
  }
 
  protected boolean isBg() {
    return bg;
  }

  protected void setBg(boolean bg) {
    this.bg = bg;
  }

  private class ModalListener implements ActionListener{
    public void actionPerformed(ActionEvent event){
      Color selected = JColorChooser.showDialog(
        null, 
        isBg()?"Set background":"Set foreground", 
        		getContentPane());
      setBackground(selected);
      setColorByProperty();
      }
   }

}
